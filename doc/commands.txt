1. Hand-shaking (for serial port only)
   HOST   sends  0x55 0x55 0x55 ... 0x55
   DEVICE replys 0xAA 0xAA 0xAA ... 0xAA
   HOST can confirm that DEVICE is ready when receives 0xAA and can continue the communication.

2. Packet format (in hex) in communication between HOST and DEVICE
     {start} {crc8} {type} {reg_addr} {status} {length} {payload}

     {start}         1 byte
                     0xAA if packet is from HOST to DEVICE
                     0x55 if packet is from DEVICE to HOST
     {crc8}          1 byte
                     crc8 of the packet except {start} and {crc8}
                     crc8 = 0x00 means bypass CRC checking
     {type}          1 byte
                     0x01 = register SET
                     0x02 = register GET
     {reg_addr}      1 byte
     {status}        1 byte
                     0x00: Invalid and can be ignored
                     0x01: SUCCESS
                     0x80: Generic Error
                     0x81: CRC error
     {length}        1 bytes
                     number of bytes in payload
     {data}          0~128 bytes
                     payload

3. Register memory map
    // MCU information & bootloader control
    REG_00h[128] R/-  ASCII       MCU Part Number
    REG_01h[128] R/-  ASCII       MCU UUID
    REG_02h[3]   R/-  uint8_t[]   Bootloader Version
    REG_03h[4]   R/-  uint32_t    Bootloader start FLASH address
    REG_04h[4]   R/-  uint32_t    Bootloader size

    REG_0Eh[128] -/W  uint8_t[]   Password
    REG_0Fh[2]   -/W  uint16_t    Exit bootloader & reset
                                  [7:0] delay time before exit

    // FLASH information
    REG_10h[4]   R/-  uint32_t    FLASH start address
    REG_11h[4]   R/-  uint32_t    FLASH size
    REG_12h[4]   R/-  uint32_t    number of FLASH sectors
    REG_13h[4]   R/-  uint32_t    supported FLASH program width
                                  [7] WR uint64_t
                                  [6] WR uint32_t
                                  [5] WR uint16_t
                                  [4] WR uint8_t
                                  [3] RD uint64_t
                                  [2] RD uint32_t
                                  [1] RD uint16_t
                                  [0] RD uint8_t
    REG_14h[4]   R/-  uint32_t    Max. FLASH sector erase time
    REG_15h[4]   R/-  uint32_t    Max. FLASH sector program time
    REG_16h[4]   R/-  uint32_t    Max. FLASH mass erase time

    // FLASH operation
    REG_18h[1]   -/W  uint8_t     FLASH erase/verify
                                  write 0x81 = erase full chip FLASH
                                  write 0x82 = erase selected FLASH sector
                                  write 0x01 = calculate CRC-8 of full chip FLASH
                                  write 0x02 = calculate CRC-8 of the selected FLASH sector
    REG_19h[4]   R/W              FLASH sector select
    REG_1Ah[4]   R/-              FLASH sector start address
    REG_1Bh[4]   R/-              FLASH sector size
    REG_1Ch[4]   R/W  uint32_t    FLASH address offset pointer (auto increase)
    REG_1Dh[128] R/W  uint8_t[]   FLASH data

    // EEPROM information
    REG_20h[4]   R/-  uint32_t    EEPROM start address
    REG_21h[4]   R/-  uint32_t    EEPROM size
    REG_22h[4]   R/-  uint32_t    number of EEPROM sectors
    REG_23h[4]   R/-  uint32_t    supported EEPROM program width
                                  [7] WR uint64_t
                                  [6] WR uint32_t
                                  [5] WR uint16_t
                                  [4] WR uint8_t
                                  [3] RD uint64_t
                                  [2] RD uint32_t
                                  [1] RD uint16_t
                                  [0] RD uint8_t
    REG_24h[4]   R/-  uint32_t    Max. EEPROM sector erase time
    REG_25h[4]   R/-  uint32_t    Max. EEPROM sector program time
    REG_26h[4]   R/-  uint32_t    Max. EEPROM mass erase time

    // EEPROM operation
    REG_28h[1]   -/W  uint8_t     EEPROM erase/verify
                                  write 0x81 = erase full chip EEPROM
                                  write 0x82 = erase selected EEPROM sector
                                  write 0x01 = calculate CRC-8 of full chip EEPROM
                                  write 0x02 = calculate CRC-8 of the selected EEPROM sector
    REG_29h[4]   R/W              EEPROM sector select
    REG_2Ah[4]   R/-              EEPROM sector start address
    REG_2Bh[4]   R/-              EEPROM sector size
    REG_2Ch[4]   R/W  uint32_t    EEPROM address offset pointer (auto increase)
    REG_2Dh[128] R/W  uint8_t[]   EEPROM data

4. Enter bootloader command
   "bootloader -p {%s}\r\n"

